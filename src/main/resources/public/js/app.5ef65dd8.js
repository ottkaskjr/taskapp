(function(t){function e(e){for(var n,r,o=e[0],l=e[1],c=e[2],d=0,f=[];d<o.length;d++)r=o[d],Object.prototype.hasOwnProperty.call(a,r)&&a[r]&&f.push(a[r][0]),a[r]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);u&&u(e);while(f.length)f.shift()();return i.push.apply(i,c||[]),s()}function s(){for(var t,e=0;e<i.length;e++){for(var s=i[e],n=!0,o=1;o<s.length;o++){var l=s[o];0!==a[l]&&(n=!1)}n&&(i.splice(e--,1),t=r(r.s=s[0]))}return t}var n={},a={app:0},i=[];function r(e){if(n[e])return n[e].exports;var s=n[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.m=t,r.c=n,r.d=function(t,e,s){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(s,n,function(e){return t[e]}.bind(null,n));return s},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=e,o=o.slice();for(var c=0;c<o.length;c++)e(o[c]);var u=l;i.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"034f":function(t,e,s){"use strict";s("85ec")},"17ea":function(t,e,s){"use strict";s("beae")},"18be":function(t,e,s){},"56d7":function(t,e,s){"use strict";s.r(e);var n=s("2b0e"),a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("router-view")],1)},i=[],r=(s("034f"),s("2877")),o={},l=Object(r["a"])(o,a,i,!1,null,null,null),c=l.exports,u=s("8c4f"),d=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("Brand"),s("Tasks")],1)},f=[],h=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},p=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"text-center py-3"},[s("p",{staticClass:"brand"},[t._v("taskApp")])])}],b={name:"Brand"},v=b,m=(s("b95a"),Object(r["a"])(v,h,p,!1,null,null,null)),k=m.exports,_=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[s("div",{attrs:{id:"notifyParent"}},t._l(t.notifications,(function(e,n){return s("div",{staticClass:"notification p-3 mb-1"},[s("p",{},[t._v(t._s(e))]),s("b-button",{staticClass:"btn-sm",attrs:{variant:"success"},on:{click:function(e){return t.dismiss(n)}}},[t._v("Close")])],1)})),0),s("div",{staticClass:"mt-3 mb-4"},[s("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.taskModal",modifiers:{taskModal:!0}}],staticClass:"btn btn-lg",attrs:{variant:"success"}},[t._v("Create task")]),s("b-modal",{attrs:{id:"taskModal",title:"Create task","hide-footer":""}},[s("label",{},[t._v("Task objective*")]),s("b-form-input",{attrs:{placeholder:"Task"},on:{input:function(e){return t.validateForm()}},model:{value:t.newTask.task,callback:function(e){t.$set(t.newTask,"task",e)},expression:"newTask.task"}}),s("label",[t._v("Task deadline*")]),s("b-form-input",{staticClass:"mb-1",attrs:{type:"date"},on:{input:function(e){return t.validateForm()}},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}}),s("b-form-input",{attrs:{type:"time"},on:{input:function(e){return t.validateForm()}},model:{value:t.time,callback:function(e){t.time=e},expression:"time"}}),s("div",{staticClass:"text-center py-3"},[s("b-button",{staticClass:"btn-lg",attrs:{id:"createTaskBtn",variant:"success",disabled:0==t.validated},on:{click:function(e){return t.createTask()}}},[t._v("Create")])],1)],1),s("b-modal",{attrs:{id:"errorModal",title:"Error"}},[s("p",{staticClass:"my-4"},[t._v(t._s(t.error))])])],1),s("div",{attrs:{id:"tasksContainer"}},t._l(t.tasks,(function(e){return s("div",{staticClass:"taskContainer mx-1 mx-md-0 row p-3 border-sm shadowSm mb-3 text-md-center text-left",class:{critical:t.isDue(e.deadline)}},[s("div",{staticClass:"col-12 col-md-4"},[t._m(0,!0),s("p",[t._v(t._s(e.task))])]),s("div",{staticClass:"col-12 col-md-3"},[t._m(1,!0),s("p",[t._v(t._s(t.buildDate(e.deadline)))])]),s("div",{staticClass:"col-12 col-md-3"},[t._m(2,!0),s("p",[t._v(t._s(t.buildDate(e.createdAt)))])]),s("div",{staticClass:"col-12 col-md-2 text-center"},[s("button",{staticClass:"btn btn-success",class:{"btn-warning":t.isDue(e.deadline)},attrs:{id:e.id},on:{click:function(s){return t.resolveTask(e.id,e.task)}}},[t._v(" Resolve ")])])])})),0)])},g=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("p",{staticClass:"mb-0"},[s("b",[t._v("Objective")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("p",{staticClass:"mb-0"},[s("b",[t._v("Deadline")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("p",{staticClass:"mb-0"},[s("b",[t._v("Created")])])}],w={name:"Tasks",data:function(){return{newTask:{task:""},date:"",time:"",validated:!1,tasks:[],error:"",connection:null,notifications:[]}},methods:{dismiss:function(t){this.notifications.splice(t,1)},validateForm:function(){this.validated=!0,this.newTask.task.length<1&&(this.validated=!1),this.date.length<1&&(this.validated=!1),this.time.length<1&&(this.validated=!1)},createTask:function(){let t=parseInt(this.date.slice(0,4)),e=parseInt(this.date.slice(5,7))-1,s=parseInt(this.date.slice(8,10)),n=parseInt(this.time.slice(0,2)),a=parseInt(this.time.slice(3,5)),i=new Date(t,e,s,n,a);this.newTask.deadline=i.getTime();let r=this.newTask.task;this.$http.post(this.$host+"task/",this.newTask).then(t=>{this.newTask={task:""},this.date="",this.time="",this.validated=!1,this.$bvModal.hide("taskModal"),this.sendMessage(r+" created")}).catch(t=>{this.$bvModal.hide("taskModal"),this.error=t.message,this.$bvModal.show("errorModal")})},sortTasks:function(){this.tasks.sort((t,e)=>t.deadline-e.deadline)},getTasks:function(){this.$http.get(this.$host+"task/").then(t=>{this.tasks=t.data.sort((t,e)=>t.deadline-e.deadline)}).catch(t=>{this.error=t.message,this.$bvModal.show("errorModal")})},buildDate:function(t){let e=new Date(parseInt(t));return this.fixNumber(e.getHours())+":"+this.fixNumber(e.getMinutes())+" "+this.fixNumber(e.getDate())+"-"+this.fixNumber(e.getMonth()+1)+"-"+e.getFullYear()},fixNumber:function(t){return t<10?0+t.toString():t},isDue:function(t){let e=(new Date).getTime();return t-e<36e5},resolveTask:function(t,e){this.$http.delete(this.$host+"task/"+t).then(t=>{this.sendMessage(e+" is resolved")}).catch(t=>{this.error=t.message,this.$bvModal.show("errorModal")})},sendMessage:function(t){this.connection.send(t)}},created:function(){this.getTasks(),this.connection=new WebSocket("ws://localhost:8080/update/1"),this.connection.onopen=function(t){},this.connection.onmessage=t=>{this.notifications.push(t.data),this.getTasks()}}},T=w,C=(s("17ea"),Object(r["a"])(T,_,g,!1,null,null,null)),x=C.exports,y={name:"Landing",components:{Brand:k,Tasks:x}},M=y,$=(s("cbf6"),Object(r["a"])(M,d,f,!1,null,null,null)),O=$.exports;n["default"].use(u["a"]);const j=[{path:"/",name:"Landing",component:O}],D=new u["a"]({routes:j});var E=D,P=s("bc3a"),S=s.n(P),I=s("2106"),N=s.n(I),F=s("5f5b"),B=s("b1e0");s("f9e3"),s("2dd8");n["default"].config.productionTip=!1,n["default"].prototype.$http=S.a,n["default"].use(F["a"]),n["default"].use(B["a"]),n["default"].use(N.a,S.a),n["default"].prototype.$host="/",new n["default"]({router:E,render:function(t){return t(c)}}).$mount("#app")},"6c2d":function(t,e,s){},"85ec":function(t,e,s){},b95a:function(t,e,s){"use strict";s("6c2d")},beae:function(t,e,s){},cbf6:function(t,e,s){"use strict";s("18be")}});
//# sourceMappingURL=app.5ef65dd8.js.map